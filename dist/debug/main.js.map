{"version":3,"sources":["../../scripts/main.ts"],"sourcesContent":["import { system, world, ItemComponentUseEvent} from \"@minecraft/server\";\r\n\r\nfunction PFEHourTimeDownEvents() {\r\n    let currentTime = new Date(Date.now())\r\n    //Cassette Trader spawning\r\n    //console.warn(`Attempting to spawn cassette trader`)\r\n    let allPlayers = world.getAllPlayers()\r\n    let randomPlayer = allPlayers.at(Math.abs(Math.round(Math.random() * (allPlayers.length-1))))\r\n    randomPlayer?.dimension.spawnEntity('poke_cassette:cassette_trader',randomPlayer.location).runCommand(`spreadplayers ~ ~ 30 40 @s ~10`)\r\n}\r\nfunction PFETimeValidation(){\r\n    let currentTime = new Date(Date.now())\r\n    if (currentTime.getMinutes() == 0){\r\n        PFEHourTimeDownEvents()\r\n    }else{\r\n        system.runTimeout(()=>{\r\n            PFETimeValidation()\r\n        },Math.abs(60 -new Date(Date.now()).getSeconds())*20)\r\n    }\r\n}\r\n//Custom Component Registry\r\nworld.beforeEvents.worldInitialize.subscribe(data => {\r\n    system.runTimeout(()=>{\r\n        PFETimeValidation()\r\n    },Math.abs(60 -new Date(Date.now()).getSeconds())*20);\r\n    data.itemComponentRegistry.registerCustomComponent(\r\n        \"poke_cassette:cassette\", {\r\n            onUse(data:ItemComponentUseEvent){\r\n                const id = data.itemStack!.typeId\r\n                const trackId = id.substring(id.lastIndexOf(\"_\")).substring(1)\r\n                if (data.source.isSneaking){\r\n                    data.source.queueMusic(`poke.record.${trackId}`)\r\n                    data.source.playSound('poke.cassette_activate')\r\n                    data.source.sendMessage({translate:`translation.poke_cassette:trackQueued`})\r\n                    return;\r\n                }else{\r\n                    data.source.playMusic(`poke.record.${trackId}`,{fade:2.5})\r\n                    data.source.playSound('poke.cassette_activate')\r\n                }\r\n                return;\r\n            }\r\n        }\r\n    );\r\n    return;\r\n})"],"mappings":";AAAA,SAAS,QAAQ,aAAmC;AAEpD,SAAS,wBAAwB;AAC7B,MAAI,cAAc,IAAI,KAAK,KAAK,IAAI,CAAC;AAGrC,MAAI,aAAa,MAAM,cAAc;AACrC,MAAI,eAAe,WAAW,GAAG,KAAK,IAAI,KAAK,MAAM,KAAK,OAAO,KAAK,WAAW,SAAO,EAAE,CAAC,CAAC;AAC5F,gBAAc,UAAU,YAAY,iCAAgC,aAAa,QAAQ,EAAE,WAAW,gCAAgC;AAC1I;AACA,SAAS,oBAAmB;AACxB,MAAI,cAAc,IAAI,KAAK,KAAK,IAAI,CAAC;AACrC,MAAI,YAAY,WAAW,KAAK,GAAE;AAC9B,0BAAsB;AAAA,EAC1B,OAAK;AACD,WAAO,WAAW,MAAI;AAClB,wBAAkB;AAAA,IACtB,GAAE,KAAK,IAAI,KAAI,IAAI,KAAK,KAAK,IAAI,CAAC,EAAE,WAAW,CAAC,IAAE,EAAE;AAAA,EACxD;AACJ;AAEA,MAAM,aAAa,gBAAgB,UAAU,UAAQ;AACjD,SAAO,WAAW,MAAI;AAClB,sBAAkB;AAAA,EACtB,GAAE,KAAK,IAAI,KAAI,IAAI,KAAK,KAAK,IAAI,CAAC,EAAE,WAAW,CAAC,IAAE,EAAE;AACpD,OAAK,sBAAsB;AAAA,IACvB;AAAA,IAA0B;AAAA,MACtB,MAAMA,OAA2B;AAC7B,cAAM,KAAKA,MAAK,UAAW;AAC3B,cAAM,UAAU,GAAG,UAAU,GAAG,YAAY,GAAG,CAAC,EAAE,UAAU,CAAC;AAC7D,YAAIA,MAAK,OAAO,YAAW;AACvB,UAAAA,MAAK,OAAO,WAAW,eAAe,OAAO,EAAE;AAC/C,UAAAA,MAAK,OAAO,UAAU,wBAAwB;AAC9C,UAAAA,MAAK,OAAO,YAAY,EAAC,WAAU,wCAAuC,CAAC;AAC3E;AAAA,QACJ,OAAK;AACD,UAAAA,MAAK,OAAO,UAAU,eAAe,OAAO,IAAG,EAAC,MAAK,IAAG,CAAC;AACzD,UAAAA,MAAK,OAAO,UAAU,wBAAwB;AAAA,QAClD;AACA;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ;AACA;AACJ,CAAC;","names":["data"],"file":"../scripts/main.js"}